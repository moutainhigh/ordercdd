window.onload=function(){$("body").css({height:window.innerHeight+"px",width:window.innerWidth+"px"})};window.onresize=function(){$("body").css({height:window.innerHeight+"px",width:window.innerWidth+"px"})};var options={container:"workflow-mind",editable:false,theme:"info",layout:{hspace:200},view:{line_width:1,line_color:"#555"}};var jm=new jsMind(options);var EntityKey=window.location.search.split("?")[1].split("=")[1].replace(/\b(\w)(\w*)/g,function(b,a,c){return a.toUpperCase()+c.toLowerCase()});var entityKey=window.location.search.split("?")[1].split("=")[1];var workflows=[];var mindData=null;$("title").html(entityKey+"工作流配置查看");$.get("/workflow/query?entityname="+EntityKey).success(function(a){mindData=a;$.get("/rest/"+entityKey+"Workflows").success(function(c){workflows=c._embedded[entityKey+"Workflows"];var b="";$.each(workflows,function(d,e){b+="<option value='"+e.label+"'>"+e.label+"</option>"});$("#workflow-select").append(b);getWorkflowStates()})});function getWorkflowStates(){var a=$("#workflow-select").val();$.each(mindData,function(b,c){if(c.topic===a){paintMind(c)}})}function paintMind(a){var b={meta:{name:"工作流程配置图",author:"小金",version:"0.2"},format:"node_tree",data:a};jm.show(b)};